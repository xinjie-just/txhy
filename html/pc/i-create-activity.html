<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>个人中心-发布活动 | 同乡好运</title>
    <meta name="keywords" content="个人中心-发布活动" />
    <meta name="description" content="个人中心-发布活动" />
    <meta name="author" content="lixinjie" />
    <link href="../../style/style-pc.css" rel="stylesheet" />
    <link rel="stylesheet" href="../../style/datetimepicker.css">
    <!--[if lt IE 9]>
    <script src="../../jscript/html5.js"></script>
    <![endif]-->
</head>
<body>
    <!--顶部-->
    <div class="header-bg">
        <header class="header clear" role="banner">
            <figure class="logo fl">
                <a href="#" title="回到同乡好运首页">
                    <img src="../../image/pc/logo.png" alt="同乡好运logo" />
                </a>
            </figure>
            <form action="#" name="#" method="post" class="address fl">
                <select>
                    <option value="北京">北京</option>
                    <option value="上海">上海</option>
                    <option value="天津">天津</option>
                    <option value="重庆">重庆</option>
                    <option value="南京">南京</option>
                    <option value="杭州">杭州</option>
                    <option value="成都">成都</option>
                    <option value="武汉">武汉</option>
                </select>
            </form>
            <nav role="navigation" class="nav fl">
                <ul class="nav-list clear">
                    <li>
                        <a href="#" title="首页">首页</a>
                    </li>
                    <li>
                        <a href="#" title="故乡">故乡</a>
                    </li>
                    <li>
                        <a href="#" title="婚恋交友">婚恋交友</a>
                    </li>
                    <li>
                        <a href="#" title="线下活动">线下活动</a>
                    </li>
                    <li>
                        <a href="#" title="附近朋友">附近朋友</a>
                    </li>
                </ul>
            </nav>
            <div class="signout fr clear">
                <a href="#" title="去个人中心主页" class="avatar fl">
                    <img src="../../image/pc/login-head.jpg" alt="我的头像"></a>
                <div class="info fl">
                    <div class="show">
                        <span class="nickname fl">昵称昵称</span>
                        <span class="triangular"></span>
                    </div>
                    <ul class="operate">
                        <li>
                            <a href="#" title="退出" class="exit"> <i class="iconfont-pc icon-pc-exit"></i>
                                退出
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>
    </div>
    <main class="i-activity-main" role="main">
        <nav class="breadcrumbs">
            <ol>
                <li>
                    <a href="index" title="首页">首页</a>
                </li>
                <li>
                    <a href="index" title="我的活动">我的活动</a>
                </li>
                <li>发布活动</li>
            </ol>
        </nav>
        <div class="container clear">
            <nav class="sidebar-l">
                <ul>
                    <!-- 给当前页面的 a 元素添加 active 类 -->
                    <li>
                        <a href="#" title="我的资料" class="active">我的资料</a>
                    </li>
                    <li>
                        <a href="#" title="我的好友">我的好友</a>
                    </li>
                    <li>
                        <a href="#" title="我的活动">我的活动</a>
                    </li>
                    <li>
                        <a href="#" title="我的相册">我的相册</a>
                    </li>
                    <li>
                        <a href="#" title="我的朋友圈">我的朋友圈</a>
                    </li>
                    <li>
                        <a href="#" title="我的订单">我的订单</a>
                    </li>
                    <li>
                        <a href="#" title="我的钱包">我的钱包</a>
                    </li>
                    <li>
                        <a href="#" title="我的评价">我的评价</a>
                    </li>
                </ul>
            </nav>
            <aside class="sidebar-r">
                <div href="#" title="填写活动信息" class="sidebar-r-heading write">填写活动信息</div>
                <form action="" name="creatActivity" class="create-activity">
                    <div class="name">
                        <label for="name">活动标题：</label>
                        <input type="text" name="name" id="name" placeholder="为该活动输入标题" autofocus required></div>
                    <div class="type">
                        <div class="option">
                            <label for="option">活动类型：</label>
                            <select name="option" id="option" required>
                                <option value="1">同乡情谊</option>
                                <option value="2">家乡公益</option>
                                <option value="3">同学友情</option>
                                <option value="4">社会公益</option>
                                <option value="5">单身交友</option>
                                <option value="6">左邻右舍</option>
                                <option value="7">亲子互动</option>
                                <option value="8" selected>户外运动</option>
                                <option value="9">展会展览</option>
                                <option value="10">教育培训</option>
                                <option value="11">商业互惠</option>
                                <option value="12">其他类型</option>
                            </select>
                        </div>
                        <div class="write">
                            <label for="write">自定义标签：</label>
                            <input type="text" name="write" id="write" placeholder="自定义活动类型，朋友相聚更易" required></div>
                    </div>
                    <div class="time">
                        <label for="start">活动时间：</label>
                        <!-- id="start"  -->
                        <input type="text" name="start" id="start" class="datetimepicker" placeholder="选择活动开始时间" required>
                        <span>至</span>
                        <input type="text" name="end" id="end" class="datetimepicker" placeholder="选择活动结束时间" required></div>
                    <div class="address">
                        <label for="option">活动地点：</label>
                        <div id="addressSelect">
                            <select class="province cxselect" data-value="浙江省" data-first-title="选择省" disabled="disabled"></select>
                            <select class="city cxselect" data-value="杭州市" data-first-title="选择市" disabled="disabled"></select>
                            <select class="area cxselect" data-value="西湖区" data-first-title="选择地区" disabled="disabled"></select>
                        </div>
                        <input type="text" name="write" id="write" placeholder="请输入详细地址" required></div>
                    <div class="spend">
                        <label for="spend">活动费用：</label>
                        <input type="text" name="spend" id="spend" value="0" placeholder="请输入活动费用" required></div>
                    <div class="contact">
                        <!-- 这里最多可以填写三组人的电话号码 -->
                        <div class="show-phone">
                            <label for="showPhone">公开号码：</label>
                            <input type="checkbox" name="showPhone" id="showPhone">
                            <!-- <span id="showPhoneIcon" class="iconfont-pc icon-pc-selected"></span>
                        -->
                    </div>
                    <div class="group1">
                        <div class="person">
                            <label for="person">联系人员：</label>
                            <input type="text" name="person" placeholder="请填写联系人姓名" required></div>
                        <div class="phone">
                            <label for="phone">联系人电话：</label>
                            <input type="tel" name="phone" placeholder="请输入联系人电话号码" required></div>
                    </div>
                    <!-- 这里点击 button 复制一组联系方式 (class="group") 到下面 -->
                    <div class="add-delete">
                        <span id="countWarning">最多三组联系人！</span>
                        <!-- 这是数量超出后警告 -->
                        <button type="button" class="add" id="contactAdd"> <i class="iconfont-pc icon-pc-add"></i>
                            增加一组联系人员
                        </button>
                        <button type="button" class="delete" id="contactDelete">
                            <i class="iconfont-pc icon-pc-delete"></i>
                            删除一组联系人员
                        </button>
                    </div>
                </div>
                <div class="file">
                    <label for="file">添加首图：</label>
                    <div class="userdefined-file">
                        <input type="text" name="userdefinedFile" id="userdefinedFile" value="未选择任何文件">
                        <button type="button" title="选择">选择</button>
                    </div>
                    <input type="file" name="file" id="file" required></div>

                <div class="details">
                    <label for="details">活动详情：</label>
                    <textarea name="details" id="details" placeholder="输入活动详情"></textarea>
                    <span id="surplus">
                        剩余可输入 <strong>600</strong>
                        字
                    </span>
                </div>
                <div class="btn">
                    <button type="button" title="保存">保存</button>
                    <button type="submit" title="发表">发表</button>
                </div>
            </form>
        </aside>
    </div>
</main>
<!--页尾-->
<div class="footer-bg">
    <footer class="footer" role="contentinfo">
        <div class="flink-code">
            <div class="flink clear fl">
                <ul class="fast-nav fl">
                    <h4>
                        <a href="#" title="同乡首页">同乡首页</a>
                    </h4>
                    <li>
                        <a href="#" title="婚恋">故乡</a>
                    </li>
                    <li>
                        <a href="#" title="故乡">婚恋交友</a>
                    </li>
                    <li>
                        <a href="#" title="婚恋交友">线下活动</a>
                    </li>
                    <li>
                        <a href="#" title="线下活动">附近朋友</a>
                    </li>
                </ul>
                <ul class="client fl">
                    <h4>移动客户端</h4>
                    <li>
                        <a href="#" title="同乡Android版">同乡&nbsp;Android&nbsp;版</a>
                    </li>
                    <li>
                        <a href="#" title="同乡iPhone版">同乡&nbsp;iPhone&nbsp;版</a>
                    </li>
                </ul>
            </div>
            <div class="code-weixin fr">
                <h4>关注我们</h4>
                <div class="weixin">
                    <div class="weixin-text-smallpic">
                        <span class="fl">官方微信</span>
                        <img src="../../image/pc/code-weixin2.jpg" alt="官方微信二维码" class="fl" />
                    </div>
                    <div class="code-weixin-bigpic">
                        <div>扫描二维码</div>
                        <img src="../../image/pc/code-weixin.jpg" alt="官方微信二维码" />
                    </div>
                </div>
            </div>
        </div>
        <small>
            蜀ICP备：13023952(1/3)号.&nbsp;文化部监督电子邮箱&nbsp;
            <a href="mailto:wlwh@vip.sina.com" title="进入新浪微博">wlwh@vip.sina.com</a>
            &nbsp;&nbsp;24小时免费咨询电话：4006010102
        </small>
    </footer>
</div>
<script src="../../jscript/jquery-1.12.3.min.js"></script>
<script src="../../jscript/jquery.placeholder.js"></script>
<script src="../../jscript/plugin-pc.js"></script>
<script src="../../jscript/datetimepicker.js"></script>
<script src="../../jscript/jquery.cxselect.min.js"></script>
<script>
    // 使用和设置时间控件
    $(".datetimepicker").datetimepicker();

    // 使用和设置地址控件
    $.cxSelect.defaults.url = "../../jscript/cityData.min.json";
    $('#addressSelect').cxSelect({
        selects: ["province", "city", "area"],
        nodata: "none"
    });

    // 表单验证
    $("#name").css("border-color","#f44");
    /* 验证电话号码 (未解决当点击警告框的确定后，移动鼠标像是在选择文本一样的问题)
       (16年09月26日，为使发布活动时能添加座机号码，取消电话号码验证)
    */
    /*$("#phone").on("blur", function(){
        var phoneReg = /^(13|15|18|17)\d{9}$/;
        var $phone = $(this);
        if($phone != null && $phone != "" && !(phoneReg.test($phone.val()))){ 
            alert("手机号码有误，请重填!");
            $("#phone").focus();
            return false;
        }
    });*/

    // 验证活动开始时间是否大于活动结束时间    
    if ($("#start").val() != "" && $("#start").val() != null) {
        $("#end").blur(function() {
            time();
        });
    }
    if ($("#end").val() != "" && $("#end").val() != null) {
        $("#start").blur(function() {
            time();
        });
    }
    function time() {
        var start = Date.parse(new Date($("#start").val()));  // 将开始时间转换成时间戳
        var end = Date.parse(new Date($("#end").val()));  // 将结束时间转换成时间戳  
        if (!(start < end)) {
            alert("开始时间不能大于结束时间！");
        }  
    }

    // 给公开号码的自定义 checkbox 框添加颜色
      $(".showPhone").click(function() {
        if ($("#showPhone").attr("checked")) {
          $("#showPhoneIcon").css("color", "#fe5454");
        }else {
          $("#showPhoneIcon").css("color", "#999");
        }   
      });

    // 添加首图
    document.getElementById("file").onchange = function() {
        document.getElementById("userdefinedFile").value = document.getElementById("file").value;
    }

    // 创建活动页面，增加一组联系人员
    var clickCount = 0;
    $("#contactAdd").on("click", clone);  
    function clone() {
      clickCount++;
      // 每一次克隆，都修改原来的 class 名称，避免下次克隆时按倍数克隆
      $(".contact").append($(".contact .group1").clone().removeClass('group1').addClass('group' + (clickCount + 1))); 
      if (clickCount > 1) { // 最多三组联系人，当 clickCount > 1 时，表明已经添加了两组     
        $("#contactAdd").off("click", clone);
        $("#countWarning").css("display", "inline-block");
      }
    }

    // 活动详情输入剩余字符提示
    $(function(){
       $('#details').on('keyup',function(){
           var txtval = $('#details').val().length;
          var str = parseInt(600-txtval);
            if(str > 0 ){
              $('#surplus strong').html(str);
          }else{
              $('#surplus strong').html(0);
              $('#details').val($('#details').val().substring(0,600)); //当超出字数限制时，只显示 600 字
            }
        });
    });
  </script>
</body>
</html>